{
  "name": "Authentication Flow Test",
  "description": "Login flow with token-based authentication",
  "enableDebug": true,
  "variables": {
    "apiVersion": "v1",
    "environment": "test"
  },
  "defaults": {
    "baseUrl": "https://reqres.in/api",
    "timeout": 30,
    "headers": {
      "Content-Type": "application/json"
    }
  },
  "nodes": [
    {
      "id": "login",
      "name": "User login",
      "method": "POST",
      "url": "/login",
      "body": {
        "email": "eve.holt@reqres.in",
        "password": "cityslicka"
      },
      "validations": [
        {
          "httpStatusCode": 200
        },
        {
          "field": "token"
        }
      ]
    },
    {
      "id": "get_user",
      "name": "Get user details with auth token",
      "method": "GET",
      "url": "/users/2",
      "headers": {
        "Authorization": "Bearer {{ .responses.login.token }}"
      },
      "validations": [
        {
          "httpStatusCode": 200
        },
        {
          "field": "data.id",
          "value": 2
        }
      ]
    },
    {
      "id": "update_user",
      "name": "Update user with auth",
      "method": "PUT",
      "url": "/users/2",
      "headers": {
        "Authorization": "Bearer {{ .responses.login.token }}",
        "X-API-Version": "{{ .vars.apiVersion }}"
      },
      "body": {
        "name": "Updated Name",
        "job": "QA Engineer",
        "environment": "{{ .vars.environment }}"
      },
      "validations": [
        {
          "httpStatusCode": 200
        },
        {
          "field": "name",
          "value": "Updated Name"
        }
      ]
    }
  ]
}
